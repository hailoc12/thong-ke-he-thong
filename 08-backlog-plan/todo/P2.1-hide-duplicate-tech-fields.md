# P2.1: Hide Duplicate Technology Fields

**Priority**: P2 (Enhancement)
**Status**: â³ TODO
**Category**: UX Improvement
**Effort**: ðŸ”§ Small (1-2 hours)
**Created**: 2026-01-20

---

## User Request

> "Backend technology & frontend technology bi trung lap voi Ngon ngu lap trinh & framework. Hide hai field nay di nhe."

Translation: Backend technology and frontend technology fields are duplicating Programming language and Framework. Hide these two fields.

---

## Problem

### Current State

**Tab 3 (CÃ´ng nghá»‡)** has 4 technology fields:

**Top-level fields** (System model):
1. `programming_language` - NgÃ´n ngá»¯ láº­p trÃ¬nh (CharField, with SelectWithOther)
2. `framework` - Framework (CharField, with SelectWithOther)

**Nested fields** (SystemArchitecture model):
3. `backend_tech` - Backend Technology (CharField, text input)
4. `frontend_tech` - Frontend Technology (CharField, text input)

### Issue

**Duplication**: Fields 3 & 4 (backend_tech, frontend_tech) overlap significantly with fields 1 & 2 (programming_language, framework).

**User Confusion**: Two ways to specify the same information leads to:
- Inconsistent data entry
- Redundant information
- Unclear which field to fill

**Example Duplication**:
- `programming_language` = "Java"
- `backend_tech` = "Spring Boot, Java 17, Hibernate"
- `framework` = "Spring Boot"

â†’ "Java" and "Spring Boot" appear in multiple fields!

---

## Solution

### Recommended Approach: Hide Fields

**Hide from UI**:
- `backend_tech` (SystemArchitecture.backend_tech)
- `frontend_tech` (SystemArchitecture.frontend_tech)

**Keep in Backend**:
- Fields remain in database model
- Existing data preserved
- Can be unhidden later if needed

**Reasoning**:
- `programming_language` + `framework` provide sufficient granularity
- SelectWithOther dropdowns offer predefined options + custom input
- Less is more - simpler UX for users

---

## Implementation

### Frontend Changes

**File**: `/frontend/src/pages/SystemCreate.tsx`

**Location**: Tab 3 (CÃ´ng nghá»‡) section, around lines 700-750

**Change 1: Comment out backend_tech field**
```tsx
{/* HIDDEN P2.1: Duplicate of programming_language + framework
<Col xs={24} md={12}>
  <Form.Item
    name={['architecture_data', 'backend_tech']}
    label="Backend Technology"
  >
    <Input placeholder="e.g., Spring Boot 3.0, Spring Cloud" />
  </Form.Item>
</Col>
*/}
```

**Change 2: Comment out frontend_tech field**
```tsx
{/* HIDDEN P2.1: Duplicate of programming_language + framework
<Col xs={24} md={12}>
  <Form.Item
    name={['architecture_data', 'frontend_tech']}
    label="Frontend Technology"
  >
    <Input placeholder="e.g., Vue.js 3, Vuex, Element Plus" />
  </Form.Item>
</Col>
*/}
```

### Backend Changes

**None required** - fields remain in database model unchanged.

---

## Alternative Solutions

### Option 2: Merge Fields (Not Recommended)
- Combine programming_language + backend_tech â†’ "Backend Technology Stack"
- Combine framework + frontend_tech â†’ "Frontend Technology Stack"
- **Issue**: More complex migration, data merging logic needed

### Option 3: Make Optional with Tooltip (Not Recommended)
- Keep all 4 fields but add tooltip explaining when to use each
- **Issue**: Still confusing, doesn't solve duplication problem

---

## Testing

### Test Case 1: Create System with Hidden Fields
1. Navigate to `/systems/create`
2. Go to Tab 3 (CÃ´ng nghá»‡)
3. Verify: Only `programming_language` and `framework` visible
4. Fill these fields with SelectWithOther
5. Save
6. Expected: System created successfully, backend_tech and frontend_tech remain null/empty

### Test Case 2: Edit Existing System with Data
1. Open system that has backend_tech and frontend_tech values
2. Go to Tab 3
3. Verify: Fields are hidden (not displayed)
4. Edit programming_language or framework
5. Save
6. Expected: Existing backend_tech and frontend_tech values preserved (not deleted)

### Test Case 3: API Response
1. Create system with only programming_language and framework
2. GET /api/systems/{id}/
3. Verify: Response includes backend_tech and frontend_tech as null/empty
4. Expected: No errors, API response structure unchanged

---

## Migration Plan

### Phase 1: Hide Fields (This Task)
- Comment out UI components in SystemCreate.tsx and SystemEdit.tsx
- No backend changes
- Test in staging
- Deploy to production

### Phase 2: Data Analysis (Optional - Future)
- Analyze existing data in backend_tech and frontend_tech fields
- Identify if any systems have unique data not captured in programming_language/framework
- Migrate unique data if needed

### Phase 3: Deprecation (Optional - Future - P3+)
- Mark fields as deprecated in backend model
- Add comment: "Deprecated: Use programming_language and framework instead"
- Consider removing from database in major version upgrade (with migration)

---

## Related Files

- `/frontend/src/pages/SystemCreate.tsx` (Tab 3, lines ~700-750)
- `/frontend/src/pages/SystemEdit.tsx` (Tab 3, similar lines)
- `/backend/apps/systems/models.py` (SystemArchitecture model)
- No API changes required

---

## Acceptance Criteria

- [ ] backend_tech field hidden from SystemCreate Tab 3
- [ ] frontend_tech field hidden from SystemCreate Tab 3
- [ ] backend_tech field hidden from SystemEdit Tab 3
- [ ] frontend_tech field hidden from SystemEdit Tab 3
- [ ] Existing data in backend_tech and frontend_tech preserved
- [ ] Create new system: backend_tech and frontend_tech remain null (no errors)
- [ ] Edit existing system: hidden fields remain unchanged
- [ ] API responses unchanged (backward compatible)
- [ ] TypeScript compilation successful
- [ ] No console errors

---

## Benefits

### User Experience
- âœ… Simpler form (2 fields instead of 4)
- âœ… No confusion about which field to use
- âœ… Consistent data entry

### Data Quality
- âœ… No duplication
- âœ… Clear single source of truth (programming_language + framework)

### Development
- âœ… Easy to implement (comment out fields)
- âœ… 100% backward compatible
- âœ… Easy to rollback (uncomment)
- âœ… No database migration needed

---

## Rollback Plan

If users report needing these fields:
1. Uncomment the code in SystemCreate.tsx and SystemEdit.tsx
2. Redeploy frontend
3. Fields immediately visible again
4. All existing data intact

**Risk**: Very low (simple UI change, no backend impact)

---

## Estimated Time

- Frontend changes: 15 minutes
- Testing: 15 minutes
- Code review: 10 minutes
- Deployment: 5 minutes

**Total**: ~45 minutes
